<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=z9fdx1to2u"></script>
</head>
<body>
    <th:block th:fragment="mapModal-content">
        <span class="close">&times;</span>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6">
                    <div id="map" style="width:400px;height:400px;"></div>
                </div>
                <div class="col-md-6 restaurant-info">
                    <img th:src="${restaurant.imageUrl}" alt="Restaurant Image" class="restaurant-image">
                    <h3 id="title" th:text="${restaurant.title}"></h3>
                    <p><i class="bi bi-geo-alt-fill"></i> <span th:text="${restaurant.address}"></span></p>
                    <p><i class="bi bi-tag-fill"></i> <span th:text="${restaurant.category}"></span></p>
                    <!-- Hidden elements for coordinates -->
                    <span id="mapx" th:text="${restaurant.mapx}" style="display: none;"></span>
                    <span id="mapy" th:text="${restaurant.mapy}" style="display: none;"></span>
                </div>
            </div>
        </div>








        
        <script th:inline="javascript">
            /*<![CDATA[*/
            var restaurant = /*[[${restaurant}]]*/ null;
            function createMap(mapx, mapy) {
                try {
                    console.log("Creating map with coordinates:", mapx, mapy)    
                    var tm128 = new naver.maps.Point(mapx, mapy);
                    var latLng = naver.maps.TransCoord.fromTM128ToLatLng(tm128);
                    var mapOptions = {
                        center: new naver.maps.LatLng(37.3595704, 127.105399),
                        zoom: 10
                    };
                    var map = new naver.maps.Map('map', mapOptions);

                }catch (error) {
                    console.log("Error creating map:", error);  // 오류 로깅
                }
            }
            if (restaurant && restaurant.mapx && restaurant.mapy) {
                createMap(restaurant.mapx, restaurant.mapy);
            } else {
                console.error("Restaurant data is missing or incomplete");
            }

            /*]]>*/
        </script> 
    </th:block>
</body>
</html>